module.exports = (argList,wishTypes,fnName,_this)-> 
  typeOf = (obj)->
    Object.prototype.toString.call(obj)
    .replace(/\[object|\]/g,"")
    .toLowerCase()
    .trim()
  for wishType,i in wishTypes
    arg = argList[i]
    if typeOf(wishType) is "array"
      if not wishType.some((choise)->choise is typeOf(arg)) #有一个选项满足即可
        throw new TypeError "{#{fnName ? "fn?"}} \##{unless _this then i+1 else "0"} need [#{wishType.join(" or ")}] not [#{typeOf(arg)}]"
    else if typeOf(wishType) is "object"
    else
      if typeOf(arg) isnt wishType.replace("?","")
        if (a=not(wishType.includes("?"))) or (b=(wishType.includes("?") and (typeOf(arg) isnt "undefined")))
          throw new TypeError "{#{fnName ? "fn?"}} \##{unless _this then i+1 else "0"} need [#{wishType}] not [#{typeOf(arg)}]"